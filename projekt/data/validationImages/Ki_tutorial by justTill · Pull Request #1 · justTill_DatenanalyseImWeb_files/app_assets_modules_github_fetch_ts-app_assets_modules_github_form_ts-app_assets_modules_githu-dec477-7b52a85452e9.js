"use strict";(()=>{var v=Object.defineProperty;var d=(w,E)=>v(w,"name",{value:E,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_fetch_ts-app_assets_modules_github_form_ts-app_assets_modules_githu-dec477"],{63621:(w,E,m)=>{m.d(E,{H:()=>c,v:()=>h});var p=m(59753);function h(){const o=document.getElementById("ajax-error-message");o&&(o.hidden=!1)}d(h,"showGlobalError");function c(){const o=document.getElementById("ajax-error-message");o&&(o.hidden=!0)}d(c,"hideGlobalError"),(0,p.on)("deprecatedAjaxError","[data-remote]",function(o){const s=o.detail,{error:n,text:a}=s;o.currentTarget===o.target&&(n==="abort"||n==="canceled"||(/<html/.test(a)?(h(),o.stopImmediatePropagation()):setTimeout(function(){o.defaultPrevented||h()},0)))}),(0,p.on)("deprecatedAjaxSend","[data-remote]",function(){c()}),(0,p.on)("click",".js-ajax-error-dismiss",function(){c()})},66963:(w,E,m)=>{m.d(E,{D:()=>o,a:()=>c});var p=m(99997),h=m(5638);async function c(s,n,a){const u=new Request(n,a);u.headers.append("X-Requested-With","XMLHttpRequest");const e=await self.fetch(u);if(e.status<200||e.status>=300)throw new Error(`HTTP ${e.status}${e.statusText||""}`);return(0,p.t)((0,p.P)(s),e),(0,h.r)(s,await e.text())}d(c,"fetchSafeDocumentFragment");function o(s,n,a=1e3){return d(async function u(e){const t=new Request(s,n);t.headers.append("X-Requested-With","XMLHttpRequest");const r=await self.fetch(t);if(r.status<200||r.status>=300)throw new Error(`HTTP ${r.status}${r.statusText||""}`);if(r.status===200)return r;if(r.status===202)return await new Promise(l=>setTimeout(l,e)),u(e*1.5);throw new Error(`Unexpected ${r.status} response status from poll endpoint`)},"poll")(a)}d(o,"fetchPoll")},57654:(w,E,m)=>{m.d(E,{Bt:()=>s,DN:()=>u,KL:()=>r,Se:()=>a,qC:()=>l,sw:()=>e});var p=m(59753),h=m(2077),c=m(63621);(0,p.on)("click",".js-remote-submit-button",async function(i){const _=i.currentTarget.form;i.preventDefault();let g;try{g=await fetch(_.action,{method:_.method,body:new FormData(_),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})}catch{}g&&!g.ok&&(0,c.v)()});function o(i,f,_){return i.dispatchEvent(new CustomEvent(f,{bubbles:!0,cancelable:_}))}d(o,"fire");function s(i,f){f&&(n(i,f),(0,h.j)(f)),o(i,"submit",!0)&&i.submit()}d(s,"requestSubmit");function n(i,f){if(!(i instanceof HTMLFormElement))throw new TypeError("The specified element is not of type HTMLFormElement.");if(!(f instanceof HTMLElement))throw new TypeError("The specified element is not of type HTMLElement.");if(f.type!=="submit")throw new TypeError("The specified element is not a submit button.");if(!i||i!==f.form)throw new Error("The specified element is not owned by the form element.")}d(n,"checkButtonValidity");function a(i,f){if(typeof f=="boolean")if(i instanceof HTMLInputElement)i.checked=f;else throw new TypeError("only checkboxes can be set to boolean value");else{if(i.type==="checkbox")throw new TypeError("checkbox can't be set to string value");i.value=f}o(i,"change",!1)}d(a,"changeValue");function u(i,f){for(const _ in f){const g=f[_],b=i.elements.namedItem(_);(b instanceof HTMLInputElement||b instanceof HTMLTextAreaElement)&&(b.value=g)}}d(u,"fillFormValues");function e(i){if(!(i instanceof HTMLElement))return!1;const f=i.nodeName.toLowerCase(),_=(i.getAttribute("type")||"").toLowerCase();return f==="select"||f==="textarea"||f==="input"&&_!=="submit"&&_!=="reset"||i.isContentEditable}d(e,"isFormField");function t(i){return new URLSearchParams(i)}d(t,"searchParamsFromFormData");function r(i,f){const _=new URLSearchParams(i.search),g=t(f);for(const[b,L]of g)_.append(b,L);return _.toString()}d(r,"combineGetFormSearchParams");function l(i){return t(new FormData(i)).toString()}d(l,"serialize")},99997:(w,E,m)=>{m.d(E,{P:()=>p,t:()=>c});function p(o){const s=[...o.querySelectorAll("meta[name=html-safe-nonce]")].map(n=>n.content);if(s.length<1)throw new Error("could not find html-safe-nonce on document");return s}d(p,"getDocumentHtmlSafeNonces");class h extends Error{constructor(s,n){super(`${s} for HTTP ${n.status}`);this.response=n}}d(h,"ResponseError");function c(o,s,n=!1){const a=s.headers.get("content-type")||"";if(!n&&!a.startsWith("text/html"))throw new h(`expected response with text/html, but was ${a}`,s);if(n&&!(a.startsWith("text/html")||a.startsWith("application/json")))throw new h(`expected response with text/html or application/json, but was ${a}`,s);const u=s.headers.get("x-html-safe");if(u){if(!o.includes(u))throw new h("response X-HTML-Safe nonce did not match",s)}else throw new h("missing X-HTML-Safe nonce",s)}d(c,"verifyResponseHtmlSafeNonce")},10965:(w,E,m)=>{var p=m(90420),h=Object.defineProperty,c=Object.getOwnPropertyDescriptor,o=d((n,a,u,e)=>{for(var t=e>1?void 0:e?c(a,u):a,r=n.length-1,l;r>=0;r--)(l=n[r])&&(t=(e?l(a,u,t):l(t))||t);return e&&t&&h(a,u,t),t},"__decorateClass");let s=d(class extends HTMLElement{connectedCallback(){this.control&&(this.storedInput=Array(this.control.children.length).fill("")),this.addEventListener("input",this.relayInput.bind(this)),this.addEventListener("keydown",this.relayKeydown.bind(this));const n=this.closest("details");n&&n.addEventListener("toggle",()=>{n.open&&this.source.focus()})}relayKeydown(n){if((this.isControlTab(n.target)||n.target===this.source)&&(n.key==="ArrowDown"||n.key==="Tab"))n.preventDefault(),n.stopPropagation(),this.routeCustomEvent(new CustomEvent("focus-list"));else if(n.key==="Escape"){const a=this.closest("details");a&&a.removeAttribute("open")}}isControlTab(n){return!n||!this.control?!1:Array.from(this.control.children).includes(n)}relayInput(n){if(!n.target)return;const u=n.target.value;this.routeCustomEvent(new CustomEvent("input-entered",{detail:u}))}routeCustomEvent(n){this.sinks[this.selectedIndex].dispatchEvent(n)}get selectedIndex(){if(!this.control)return 0;const n=this.control.querySelector('[aria-selected="true"]');return n?Array.from(this.control.children).indexOf(n):0}storeInput(){this.storedInput[this.selectedIndex]=this.source.value}updateInput(n){this.source.value=this.storedInput[this.selectedIndex];const a=n.detail.relatedTarget.getAttribute("data-filter-placeholder");this.source.placeholder=a,this.source.setAttribute("aria-label",a),this.notifySelected()}notifySelected(){const n=this.sinks[this.selectedIndex],a=new CustomEvent("tab-selected");n.dispatchEvent(a)}},"InputDemuxElement");o([p.fA],s.prototype,"source",2),o([p.GO],s.prototype,"sinks",2),o([p.fA],s.prototype,"control",2),s=o([p.Ih],s)},43721:(w,E,m)=>{m.d(E,{ZG:()=>s,q6:()=>a,w4:()=>n});var p=m(8439);let h=!1;const c=new p.Z;function o(u){const e=u.target;if(e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE)for(const t of c.matches(e))t.data.call(null,e)}d(o,"handleFocus");function s(u,e){h||(h=!0,document.addEventListener("focus",o,!0)),c.add(u,e),document.activeElement instanceof HTMLElement&&document.activeElement.matches(u)&&e(document.activeElement)}d(s,"onFocus");function n(u,e,t){function r(l){const i=l.currentTarget;!i||(i.removeEventListener(u,t),i.removeEventListener("blur",r))}d(r,"blurHandler"),s(e,function(l){l.addEventListener(u,t),l.addEventListener("blur",r)})}d(n,"onKey");function a(u,e){function t(r){const{currentTarget:l}=r;!l||(l.removeEventListener("input",e),l.removeEventListener("blur",t))}d(t,"blurHandler"),s(u,function(r){r.addEventListener("input",e),r.addEventListener("blur",t)})}d(a,"onInput")},37505:(w,E,m)=>{var p=m(41891),h=m(69567),c=m(90420),o=m(17945),s=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=d((e,t,r,l)=>{for(var i=l>1?void 0:l?n(t,r):t,f=e.length-1,_;f>=0;f--)(_=e[f])&&(i=(l?_(t,r,i):_(i))||i);return l&&i&&s(t,r,i),i},"__decorateClass");let u=d(class extends HTMLElement{constructor(){super(...arguments);this.isCurrentVisible=!1,this.currentSelectionIndex=null,this.handleWindowResize=()=>{if(!this.virtualizedList)return;const e=this.isMobileViewport,t=this.windowHeight;this.updateViewportSize();const r=e!==this.isMobileViewport,l=t!==this.windowHeight;if(r){this.virtualizedList.destroy(),this.setupVirtualizedList();return}!this.isMobileViewport||!l||(this.listContainer.style.maxHeight=`${this.listHeight}px`,this.virtualizedList.resize(this.listHeight))},this.windowResized=()=>{this.resizeAnimationRequest&&cancelAnimationFrame(this.resizeAnimationRequest),this.resizeAnimationRequest=requestAnimationFrame(this.handleWindowResize)}}connectedCallback(){window.addEventListener("resize",this.windowResized),this.refType=this.getRequiredAttr("type")==="branch"?p.r.Branch:p.r.Tag;const e=this.getAttribute("current-committish");this.currentCommittish=e?atob(e):null,this.input=this.hasAttribute("initial-filter")&&this.currentCommittish||"",this.defaultBranch=atob(this.getRequiredAttr("default-branch")),this.nameWithOwner=atob(this.getRequiredAttr("name-with-owner")),this.canCreate=this.hasAttribute("can-create"),this.prefetchOnMouseover=this.hasAttribute("prefetch-on-mouseover");const t=this.getRequiredAttr("query-endpoint"),r=this.getRequiredAttr("cache-key");this.index=new p.W(this.refType,this,t,r,this.nameWithOwner),this.updateViewportSize(),this.setupFetchListeners()}disconnectedCallback(){this.resizeAnimationRequest&&cancelAnimationFrame(this.resizeAnimationRequest),window.removeEventListener("resize",this.windowResized)}updateViewportSize(){this.isMobileViewport=window.innerWidth<544,this.windowHeight=window.innerHeight}inputEntered(e){this.input=e.detail,this.render()}tabSelected(){this.index.fetchData()}renderTemplate(e,t){return new h.R(e,t,h.XK)}renderRow(e){const t=this.index.currentSearchResult[e];if(!t&&e>=this.listLength)return document.createElement("span");if(this.index.fetchFailed)return this.renderTemplate(this.fetchFailedTemplate,{index:e,refName:this.input});if(!t){const _=this.input===this.currentCommittish;return this.isCurrentVisible||(this.isCurrentVisible=_),this.renderTemplate(this.noMatchTemplate,{index:e,isCurrent:_,refName:this.input})}const r=this.input.length>0,l=r?"is-filtering":"",i=t===this.currentCommittish;this.isCurrentVisible||(this.isCurrentVisible=i);const f=this.renderTemplate(this.itemTemplate,{refName:t,index:e,isFilteringClass:l,urlEncodedRefName:this.urlEncodeRef(t),isCurrent:i,isNotDefault:t!==this.defaultBranch});if(r){const _=f.querySelector("span");_.textContent="";const g=t.split(this.input),b=g.length-1;for(let L=0;L<g.length;L++){const C=g[L];if(_.appendChild(document.createTextNode(C)),L<b){const T=document.createElement("b");T.textContent=this.input,_.appendChild(T)}}}return f}urlEncodeRef(e){return encodeURIComponent(e).replaceAll("%2F","/").replaceAll("%3A",":").replaceAll("%2B","+")}render(){if(this.currentSelectionIndex=null,!this.index.isLoading){if(!this.virtualizedList){this.index.search(this.input),this.setupVirtualizedList();return}this.listContainer.scrollTop=0,this.index.search(this.input),this.virtualizedList.setRowCount(this.listLength)}}get listHeight(){return this.isMobileViewport?this.windowHeight*.3:330}get listLength(){const e=this.index.currentSearchResult.length;return this.showCreateRow?e+1:e||1}get showCreateRow(){return!this.index.fetchFailed&&!this.index.exactMatchFound&&this.input!==""&&this.canCreate}getRequiredAttr(e,t=this){const r=t.getAttribute(e);if(!r)throw new Error(`Missing attribute for ${t}: ${e}`);return r}setupFetchListeners(){const e=this.closest("details");let t=!1;const r=d(()=>{t||(this.index.fetchData(),t=!0)},"fetch");if(!e||e.open){r();return}this.prefetchOnMouseover&&e.addEventListener("mouseover",r,{once:!0}),this.addEventListener("keydown",this.keydown),this.addEventListener("change",this.updateCurrent);const l=e.querySelector("input[data-ref-filter]");l&&(l.addEventListener("input",()=>{this.input=l.value,this.render()}),l.addEventListener("keydown",i=>{if(i.key==="ArrowDown"||i.key==="Tab")i.preventDefault(),i.stopPropagation(),this.focusFirstListMember();else if(i.key==="Enter"){let f=this.index.currentSearchResult.indexOf(this.input);if(f===-1)if(this.showCreateRow)f=this.listLength-1;else return;e.querySelector(`[data-index="${f}"]`).click(),i.preventDefault()}}))}focusFirstListMember(){!this.virtualizedList||(this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex))}updateCurrent(e){e.target instanceof HTMLInputElement&&e.target.checked&&e.target.value&&(this.currentCommittish=e.target.value)}keydown(e){if(this.currentSelectionIndex!==null){if(e.key==="Enter"){const t=document.activeElement;if(!t)return;t.click(),e.preventDefault();return}if(!(e.key==="Tab"&&e.shiftKey)&&e.key!=="Escape")switch(e.preventDefault(),e.stopPropagation(),e.key){case"ArrowUp":{this.currentSelectionIndex--,this.currentSelectionIndex<0&&(this.currentSelectionIndex=this.listLength-1),this.focusItemAtIndex(this.currentSelectionIndex);break}case"Home":{this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex);break}case"End":{this.currentSelectionIndex=this.listLength-1,this.focusItemAtIndex(this.currentSelectionIndex);break}case"Tab":case"ArrowDown":{this.currentSelectionIndex++,this.currentSelectionIndex>this.listLength-1&&(this.currentSelectionIndex=0),this.focusItemAtIndex(this.currentSelectionIndex);break}}}}focusItemAtIndex(e){this.virtualizedList.scrollToIndex(e,"center"),setTimeout(()=>{const t=this.listContainer.querySelector(`[data-index="${e}"]`);t&&t.focus()},20)}setupVirtualizedList(){this.listContainer.innerHTML="",this.listContainer.style.maxHeight=`${this.listHeight}px`,this.virtualizedList=new o.Z(this.listContainer,{height:this.listHeight,rowCount:this.listLength,renderRow:this.renderRow.bind(this),rowHeight:e=>{const t=this.isMobileViewport?54:33;return this.showCreateRow&&e===this.listLength-1?51:t},onRowsRendered:()=>{var e;this.hiddenCurrentElement&&(this.listContainer.removeChild(this.hiddenCurrentElement),delete this.hiddenCurrentElement),this.isCurrentVisible?this.isCurrentVisible=!1:this.hiddenCurrentItemTemplate&&(this.hiddenCurrentElement=document.createElement("div"),(e=this.hiddenCurrentElement)==null||e.appendChild(this.renderTemplate(this.hiddenCurrentItemTemplate,{refName:this.currentCommittish})),this.listContainer.appendChild(this.hiddenCurrentElement))},initialIndex:0,overscanCount:6}),this.virtualizedList.resize.bind(this.virtualizedList)}},"RefSelectorElement");a([c.fA],u.prototype,"listContainer",2),a([c.fA],u.prototype,"itemTemplate",2),a([c.fA],u.prototype,"noMatchTemplate",2),a([c.fA],u.prototype,"fetchFailedTemplate",2),a([c.fA],u.prototype,"hiddenCurrentItemTemplate",2),u=a([c.Ih],u)},41891:(w,E,m)=>{m.d(E,{W:()=>u,r:()=>n});var p=m(31579),h=m(77552);const{getItem:c,setItem:o,removeItem:s}=(0,p.Z)("localStorage",{throwQuotaErrorsOnSet:!0});var n=(e=>(e.Branch="branch",e.Tag="tag",e))(n||{});const a=d(class{constructor(e,t,r,l,i){this.knownItems=[],this.currentSearchResult=[],this.exactMatchFound=!1,this.searchTerm="",this.isLoading=!0,this.fetchInProgress=!1,this.fetchFailed=!1,this.refType=e,this.selector=t,this.refEndpoint=r,this.cacheKey=l,this.nameWithOwner=i}render(){this.selector.render()}async fetchData(){try{if(!this.isLoading||this.fetchInProgress)return;if(!this.bootstrapFromLocalStorage()){this.fetchInProgress=!0,this.fetchFailed=!1;const e=await fetch(`${this.refEndpoint}?type=${this.refType}`,{headers:{Accept:"application/json"}});await this.processResponse(e)}this.isLoading=!1,this.fetchInProgress=!1,this.render()}catch{this.fetchInProgress=!1,this.fetchFailed=!0}}async processResponse(e){if(this.emitStats(e),!e.ok){this.fetchFailed=!0;return}const t=e.clone(),r=await e.json();this.knownItems=r.refs,this.cacheKey=r.cacheKey,this.flushToLocalStorage(await t.text())}emitStats(e){if(!e.ok){(0,h.b)({incrementKey:"REF_SELECTOR_BOOT_FAILED"},!0);return}switch(e.status){case 200:{(0,h.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_UNCACHED_HTTP"});break}case 304:{(0,h.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_HTTP_CACHE"});break}default:(0,h.b)({incrementKey:"REF_SELECTOR_UNEXPECTED_RESPONSE"})}}search(e){if(this.searchTerm=e,e===""){this.currentSearchResult=this.knownItems;return}const t=[],r=[];this.exactMatchFound=!1;let l;for(const i of this.knownItems)if(l=i.indexOf(e),!(l<0)){if(l===0){e===i?(r.unshift(i),this.exactMatchFound=!0):r.push(i);continue}t.push(i)}this.currentSearchResult=[...r,...t]}bootstrapFromLocalStorage(){const e=c(this.localStorageKey);if(!e)return!1;const t=JSON.parse(e);return t.cacheKey!==this.cacheKey||!("refs"in t)?(s(this.localStorageKey),!1):(this.knownItems=t.refs,this.isLoading=!1,(0,h.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_LOCALSTORAGE"}),!0)}async flushToLocalStorage(e){try{o(this.localStorageKey,e)}catch(t){if(t.message.toLowerCase().includes("quota")){this.clearSiblingLocalStorage(),(0,h.b)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_OVERFLOWED"});try{o(this.localStorageKey,e)}catch(r){r.message.toLowerCase().includes("quota")&&(0,h.b)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_GAVE_UP"})}}else throw t}}clearSiblingLocalStorage(){for(const e of Object.keys(localStorage))e.startsWith(a.LocalStoragePrefix)&&s(e)}get localStorageKey(){return`${a.LocalStoragePrefix}:${this.nameWithOwner}:${this.refType}`}},"_SearchIndex");let u=a;u.LocalStoragePrefix="ref-selector"},2077:(w,E,m)=>{m.d(E,{j:()=>p,u:()=>h});function p(c){const o=c.closest("form");if(!(o instanceof HTMLFormElement))return;let s=h(o);if(c.name){const n=c.matches("input[type=submit]")?"Submit":"",a=c.value||n;s||(s=document.createElement("input"),s.type="hidden",s.classList.add("is-submit-button-value"),o.prepend(s)),s.name=c.name,s.value=a}else s&&s.remove()}d(p,"persistSubmitButtonValue");function h(c){const o=c.querySelector("input.is-submit-button-value");return o instanceof HTMLInputElement?o:null}d(h,"findPersistedSubmitButtonValue")},39688:(w,E,m)=>{var p=m(64463);const h=d(()=>{const c=document.getElementById("spoof-warning");if(!c)return;const o=document.querySelector(".commit-title");o&&o.classList.add("pb-1"),c.hidden=!1,c.removeAttribute("aria-hidden")},"showSpoofCommitBanner");(0,p.N7)("#js-spoofed-commit-warning-trigger",{add:h})},16246:(w,E,m)=>{m.d(E,{RB:()=>h,qC:()=>c,w0:()=>p});class p{constructor(s){this.closed=!1,this.unsubscribe=()=>{s(),this.closed=!0}}}d(p,"Subscription");function h(o,s,n,a={capture:!1}){return o.addEventListener(s,n,a),new p(()=>{o.removeEventListener(s,n,a)})}d(h,"fromEvent");function c(...o){return new p(()=>{for(const s of o)s.unsubscribe()})}d(c,"compose")}}]);})();

//# sourceMappingURL=app_assets_modules_github_fetch_ts-app_assets_modules_github_form_ts-app_assets_modules_githu-dec477-c4f766be5575.js.map